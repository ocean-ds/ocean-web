import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import Input from '../Input';

<Meta
  title="Components/Inputs/Currency Input"
  component={Input}
  argTypes={{
    type: {
      name: 'type',
      description:
        'O tipo do elemento input. Sempre "text" para inputs de moeda para melhor controle de formatação.',
      table: {
        type: { summary: '"text"' },
        defaultValue: { summary: 'text' },
      },
      control: { type: null },
    },
    label: {
      name: 'label',
      description:
        'O rótulo do campo de entrada. Inclua contexto de moeda quando útil.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: undefined },
      },
      control: { type: 'text' },
    },
    placeholder: {
      name: 'placeholder',
      description:
        'Texto de exemplo para o input. Deve corresponder às casas decimais esperadas (ex: "0,00").',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: undefined },
      },
      control: { type: 'text' },
    },
    adornment: {
      name: 'adornment',
      description:
        'Símbolo ou código da moeda exibido dentro do input. Use símbolos ($, €, £) para posição esquerda, códigos (USD, EUR) para direita.',
      table: {
        type: { summary: 'React.ReactElement | string' },
        defaultValue: { summary: undefined },
      },
      control: { type: 'text' },
    },
    position: {
      name: 'position',
      description:
        'Posição do adorno da moeda. Esquerda é comum para símbolos, direita para códigos de moeda.',
      table: {
        type: { summary: '"left" | "right"' },
        defaultValue: { summary: 'right' },
      },
      control: { type: 'select' },
      options: ['left', 'right'],
    },
    helperText: {
      name: 'helperText',
      description:
        'Texto de ajuda exibido abaixo do input. Contexto adicional sobre moeda, formatação ou regras de cálculo.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: undefined },
      },
      control: { type: 'text' },
    },
    error: {
      name: 'error',
      description:
        'Define os estilos do input para estado de erro. Use com validação para valores monetários inválidos.',
      table: {
        type: { summary: 'boolean' },
        defaultValue: { summary: false },
      },
      control: { type: 'boolean' },
    },
    disabled: {
      name: 'disabled',
      description:
        'Desabilita o campo de entrada. Use para valores monetários calculados ou somente leitura.',
      table: {
        type: { summary: 'boolean' },
        defaultValue: { summary: false },
      },
      control: { type: 'boolean' },
    },
  }}
/>

# Currency Input

Componente de entrada especializado para coletar valores monetários com símbolos de moeda e orientação de formatação adequada.

## Visão Geral

Os inputs de moeda são projetados para coletar valores monetários com indicadores visuais claros da moeda. Eles usam o tipo de input text para melhor controle de formatação e suportam símbolos de moeda posicionados à esquerda e à direita. Essencial para e-commerce, formulários financeiros e qualquer aplicação que lide com transações monetárias.

## Importação

```javascript
import { Input } from '@useblu/ocean-react';
```

## Uso

Os inputs de moeda fornecem indicação visual clara do formato monetário esperado e do tipo de moeda.

### Uso Básico

<Canvas withSource="open" withToolbar>
  <Story name="usage">
    <Input
      label="Preço"
      name="price"
      type="text"
      placeholder="0,00"
      adornment={<span>R$</span>}
      position="left"
      helperText="Digite o preço em Real brasileiro"
    />
  </Story>
</Canvas>

### Padrões Comuns

```jsx
// Input de moeda básico
<Input
  label="Preço"
  type="text"
  placeholder="0,00"
  adornment={<span>R$</span>}
  position="left"
/>

// Em formulários de e-commerce
<form onSubmit={handleSubmit}>
  <Input
    label="Preço do Produto"
    name="productPrice"
    type="text"
    placeholder="0,00"
    adornment={<span>R$</span>}
    position="left"
    required
  />
  <Button type="submit">Salvar Produto</Button>
</form>

// Diferentes moedas
<div>
  <Input label="Preço (BRL)" adornment={<span>R$</span>} position="left" />
  <Input label="Preço (USD)" adornment={<span>$</span>} position="left" />
  <Input label="Preço (EUR)" adornment={<span>€</span>} position="left" />
</div>
```

## Referência da API

O componente Currency Input é baseado no elemento `input` e suporta todos os atributos padrão de input.

{' '}

<table>
  <thead>
    <tr>
      <th>Prop</th>
      <th>Tipo</th>
      <th>Padrão</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td>
        <code>"text"</code>
      </td>
      <td>
        <code>"text"</code>
      </td>
      <td>
        Sempre "text" para inputs de moeda. Fornece melhor controle de
        formatação que "number".
      </td>
    </tr>
    <tr>
      <td>adornment</td>
      <td>
        <code>React.ReactElement | string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Símbolo ou código da moeda. Use símbolos ($, €, £) para posição
        esquerda, códigos (USD, EUR) para direita.
      </td>
    </tr>
    <tr>
      <td>position</td>
      <td>
        <code>"left" | "right"</code>
      </td>
      <td>
        <code>"right"</code>
      </td>
      <td>
        Posição do adorno da moeda. Esquerda é comum para símbolos, direita para
        códigos de moeda.
      </td>
    </tr>
    <tr>
      <td>label</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Rótulo descrevendo o campo monetário. Inclua contexto de moeda quando
        útil.
      </td>
    </tr>
    <tr>
      <td>placeholder</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Formato de exemplo (ex: "0,00"). Deve corresponder às casas decimais
        esperadas.
      </td>
    </tr>
    <tr>
      <td>helperText</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>Contexto adicional sobre moeda, formatação ou regras de cálculo.</td>
    </tr>
    <tr>
      <td>error</td>
      <td>
        <code>boolean</code>
      </td>
      <td>
        <code>false</code>
      </td>
      <td>
        Quando true, exibe estilo de erro. Use com validação para valores
        inválidos.
      </td>
    </tr>
    <tr>
      <td>disabled</td>
      <td>
        <code>boolean</code>
      </td>
      <td>
        <code>false</code>
      </td>
      <td>
        Quando true, impede edição. Use para valores calculados ou somente
        leitura.
      </td>
    </tr>
  </tbody>
</table>

## Exemplos

### Símbolos de Moeda

Use a prop `adornment` com diferentes símbolos de moeda:

- `R$`: Para Real brasileiro (posição esquerda)
- `$`: Para Dólar americano (posição esquerda)
- `€`: Para Euro (posição esquerda)
- `£`: Para Libra esterlina (posição esquerda)

<Canvas withSource="open" withToolbar>
  <Story name="currencies">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <Input
        label="Real Brasileiro"
        name="brl"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Moeda brasileira"
      />
      <Input
        label="Dólar Americano"
        name="usd"
        type="text"
        placeholder="0.00"
        adornment={<span>$</span>}
        position="left"
        helperText="Moeda americana"
      />
      <Input
        label="Euro"
        name="eur"
        type="text"
        placeholder="0,00"
        adornment={<span>€</span>}
        position="left"
        helperText="Moeda europeia"
      />
      <Input
        label="Libra Esterlina"
        name="gbp"
        type="text"
        placeholder="0.00"
        adornment={<span>£</span>}
        position="left"
        helperText="Moeda britânica"
      />
    </div>
  </Story>
</Canvas>

### Posições do Adorno

Use a prop `position` para controlar onde o símbolo aparece:

- `left`: Para símbolos de moeda (R$, $, €)
- `right`: Para códigos de moeda (BRL, USD, EUR)

<Canvas withSource="open" withToolbar>
  <Story name="positions">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <Input
        label="Símbolo à Esquerda"
        name="leftSymbol"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Comum para a maioria das moedas"
      />
      <Input
        label="Código à Direita"
        name="rightCode"
        type="text"
        placeholder="0,00"
        adornment={<span>BRL</span>}
        position="right"
        helperText="Útil para códigos de moeda"
      />
    </div>
  </Story>
</Canvas>

### Estados

Os inputs de moeda suportam vários estados para validação e feedback:

<Canvas withSource="open" withToolbar>
  <Story name="states">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <Input
        label="Preço Normal"
        name="normal"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Digite o preço do produto"
      />
      <Input
        label="Preço Inválido"
        name="error"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="O preço deve ser maior que 0"
        error
      />
      <Input
        label="Preço Desabilitado"
        name="disabled"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Preço calculado automaticamente"
        disabled
      />
    </div>
  </Story>
</Canvas>

### Estados por Variante

Exemplos de diferentes estados para validação:

<Canvas withSource="open" withToolbar>
  <Story name="validation-states">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <Input
        label="Valor Válido"
        name="valid"
        type="text"
        value="150,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Valor dentro do limite permitido"
      />
      <Input
        label="Valor Muito Alto"
        name="tooHigh"
        type="text"
        value="10.000,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Valor excede o limite máximo de R$ 5.000,00"
        error
      />
      <Input
        label="Valor Obrigatório"
        name="required"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Este campo é obrigatório"
        error
      />
    </div>
  </Story>
</Canvas>

### Exemplo de E-commerce

Exemplo prático em um formulário de precificação de produto:

<Canvas withSource="open" withToolbar>
  <Story name="ecommerce-example">
    <form
      style={{
        display: 'flex',
        flexDirection: 'column',
        gap: '16px',
        maxWidth: '400px',
      }}
    >
      <Input
        label="Preço do Produto"
        name="productPrice"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Preço final incluindo impostos"
        required
      />
      <Input
        label="Preço de Custo"
        name="costPrice"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Seu custo para este produto"
      />
      <Input
        label="Frete"
        name="shipping"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Custos adicionais de envio"
      />
      <Input
        label="Desconto"
        name="discount"
        type="text"
        placeholder="0,00"
        adornment={<span>R$</span>}
        position="left"
        helperText="Valor do desconto (se aplicável)"
      />
    </form>
  </Story>
</Canvas>

## Integração com Formulários

### Uso em Formulários

```jsx
<form onSubmit={handleSubmit}>
  <div>
    <Input
      label="Valor da Compra"
      name="purchaseAmount"
      type="text"
      placeholder="0,00"
      adornment={<span>R$</span>}
      position="left"
      required
    />
  </div>
  <Button type="submit" loading={isSubmitting}>
    {isSubmitting ? 'Processando...' : 'Finalizar Compra'}
  </Button>
</form>
```

### Validação

```jsx
<form onSubmit={handleSubmit}>
  <Input
    label="Preço"
    name="price"
    type="text"
    placeholder="0,00"
    adornment={<span>R$</span>}
    position="left"
    error={priceError}
    helperText={
      priceError ? 'Preço deve ser maior que R$ 0,01' : 'Digite o preço'
    }
  />
  <Button type="submit" disabled={!isFormValid} loading={isSubmitting}>
    {isSubmitting ? 'Salvando...' : 'Salvar Produto'}
  </Button>
</form>
```

## Melhores Práticas

### 1. Formatação de Moeda

- Use sempre `type="text"` para melhor controle de formatação
- Configure placeholder com o formato esperado (ex: "0,00" para BRL)
- Use símbolos apropriados para cada moeda

### 2. Posicionamento de Símbolos

- Use `position="left"` para símbolos de moeda (R$, $, €, £)
- Use `position="right"` para códigos de moeda (BRL, USD, EUR)
- Mantenha consistência em toda a aplicação

### 3. Acessibilidade

- Sempre forneça labels descritivos
- Use helperText para explicar formatação esperada
- Forneça feedback claro para estados de erro
- Inclua contexto da moeda quando necessário

### 4. Validação e UX

- Valide valores mínimos e máximos apropriados
- Forneça mensagens de erro claras e específicas
- Use estados disabled para valores calculados
- Considere formatação automática durante a digitação

## Classes CSS

{' '}

<table>
  <thead>
    <tr>
      <th>Classe Global</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>.ods-input</code>
      </td>
      <td>Estilos aplicados ao elemento raiz.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input--filled</code>
      </td>
      <td>Estilos aplicados quando o input tem conteúdo.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input--disabled</code>
      </td>
      <td>Estilos aplicados quando o input está desabilitado.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input--error</code>
      </td>
      <td>Estilos aplicados quando o input está em estado de erro.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input--left</code>
      </td>
      <td>Estilos aplicados quando o adorno está posicionado à esquerda.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input__adornment</code>
      </td>
      <td>Estilos aplicados ao elemento de adorno da moeda.</td>
    </tr>
  </tbody>
</table>

## Props

<ArgsTable of={Input} />

A ref é encaminhada para o elemento input. Qualquer outra prop fornecida será passada para o elemento input.

## Playground

<Canvas>
  <Story
    name="playground"
    args={{
      label: 'Input de Moeda',
      placeholder: '0,00',
      adornment: 'R$',
      position: 'left',
      helperText: 'Digite o valor',
      type: 'text',
      error: false,
      disabled: false,
    }}
  >
    {(args) => <Input {...args} adornment={<span>{args.adornment}</span>} />}
  </Story>
</Canvas>
