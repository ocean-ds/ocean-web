import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import Input from '../Input';
import {
  InfoOutline,
  HelpOutline,
  QuestionMarkOutline,
} from '@useblu/ocean-icons-react';

export const TOOLTIP_LABELS = {
  senha: 'Senha',
  nomeUsuario: 'Nome de Usuário',
  email: 'Email',
  telefone: 'Telefone',
  cpfCnpj: 'CPF/CNPJ',
  dataNascimento: 'Data de Nascimento',
  valorMoeda: 'Valor em Moeda',
  observacoes: 'Observações',
};

export const TOOLTIP_MESSAGES = {
  senhaRequisitos:
    'A senha deve ter pelo menos 8 caracteres e incluir números e caracteres especiais',
  usuarioRequisitos:
    'O nome de usuário deve ter entre 3 e 20 caracteres, contendo apenas letras, números e underscores',
  emailPrivacidade:
    'Usamos seu email para verificação de conta e notificações importantes. Nunca compartilhamos seu email com terceiros.',
  telefoneFormato:
    'Digite seu número de telefone com DDD. Formato: (XX) XXXXX-XXXX para celular ou (XX) XXXX-XXXX para fixo',
  cpfCnpjFormato:
    'Digite seu CPF (para pessoas físicas) ou CNPJ (para empresas). Use apenas números ou inclua pontos e traços',
  dataFormato: 'Digite a data no formato DD/MM/AAAA. Exemplo: 15/08/1990',
  valorExemplo:
    'Digite valores monetários usando vírgula como separador decimal. Exemplo: 1.234,56',
  observacoesLimite:
    'Máximo de 500 caracteres. Use para informações adicionais relevantes ao contexto',
};

export const TOOLTIP_HELPER_TEXTS = {
  escolhaSenhaForte: 'Escolha uma senha forte',
  identificadorUnico: 'Este será seu identificador único',
  emailValido: 'Digite um email válido',
  incluaDDD: 'Inclua o DDD',
  identificacaoFiscal: 'Identificação fiscal pessoal ou empresarial',
  formatoCorreto: 'Use o formato correto',
  valorMonetario: 'Valor em reais (R$)',
  informacoesAdicionais: 'Informações adicionais opcionais',
};

export const TOOLTIP_PLACEHOLDERS = {
  digiteSenha: 'Digite sua senha',
  nomeUsuario: 'Digite seu nome de usuário',
  seuEmail: 'seu@email.com',
  telefoneExemplo: '(11) 99999-9999',
  cpfExemplo: '000.000.000-00',
  dataExemplo: 'DD/MM/AAAA',
  valorExemplo: '1.234,56',
  observacoesExemplo: 'Digite suas observações...',
};

<Meta
  title="Components/Inputs/Input com Tooltip"
  component={Input}
  parameters={{
    docs: {
      description: {
        component:
          'Componente de entrada com tooltip para fornecer contexto adicional.',
      },
    },
    options: {
      showPanel: true,
      panelPosition: 'bottom',
    },
  }}
  argTypes={{
    type: {
      name: 'type',
      description:
        'O tipo do elemento input. Define o comportamento e validação específica para cada tipo de entrada.',
      table: {
        type: { summary: '"text" | "email" | "password" | "number"' },
        defaultValue: { summary: '"text"' },
      },
      control: {
        type: 'select',
        options: ['text', 'email', 'password', 'number'],
      },
    },
    label: {
      name: 'label',
      description:
        'O rótulo do campo de entrada. Essencial para acessibilidade e compreensão do usuário sobre o que inserir.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    tooltipMessage: {
      name: 'tooltipMessage',
      description:
        'Mensagem do tooltip exibida ao passar o mouse sobre o rótulo. Use para fornecer informações adicionais sem ocupar espaço permanente na interface.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    placeholder: {
      name: 'placeholder',
      description:
        'Texto de exemplo mostrado quando o input está vazio. Deve demonstrar o formato esperado ou dar dicas sobre o conteúdo.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    helperText: {
      name: 'helperText',
      description:
        'Texto de ajuda exibido abaixo do input. Use para orientações adicionais ou mensagens de validação.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    error: {
      name: 'error',
      description:
        'Quando true, aplica estilos de estado de erro ao input. Use com validação de formulário para indicar problemas.',
      table: {
        type: { summary: 'boolean' },
        defaultValue: { summary: 'false' },
      },
      control: { type: 'boolean' },
    },
    disabled: {
      name: 'disabled',
      description:
        'Quando true, desabilita o campo de entrada. Use quando o campo não estiver disponível ou aplicável no contexto atual.',
      table: {
        type: { summary: 'boolean' },
        defaultValue: { summary: 'false' },
      },
      control: { type: 'boolean' },
    },
  }}
/>

# Input com Tooltip

Componente de entrada aprimorado com funcionalidade de tooltip para fornecer contexto adicional e orientações sem poluir a interface.

## Visão Geral

Input com tooltip estende o componente de input padrão adicionando ajuda contextual através de mensagens em tooltip. Os tooltips aparecem ao passar o mouse sobre o rótulo e fornecem informações adicionais, regras de validação, requisitos de formatação ou dicas úteis sem ocupar espaço permanente na interface. Perfeito para formulários complexos ou quando o espaço é limitado.

## Importação

```javascript
import { Input } from '@useblu/ocean-react';
```

## Uso

Tooltips fornecem ajuda contextual e informações adicionais que complementam o rótulo principal e o texto de ajuda.

### Uso Básico

<Canvas withSource="open" withToolbar>
  <Story name="usage">
    <Input
      label={TOOLTIP_LABELS.senha}
      name="password"
      type="password"
      placeholder={TOOLTIP_PLACEHOLDERS.digiteSenha}
      tooltipMessage={TOOLTIP_MESSAGES.senhaRequisitos}
      helperText={TOOLTIP_HELPER_TEXTS.escolhaSenhaForte}
    />
  </Story>
</Canvas>

### Padrões Comuns

```jsx
// Regras de validação
<div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
  <Input
    label={TOOLTIP_LABELS.nomeUsuario}
    name="username"
    type="text"
    placeholder={TOOLTIP_PLACEHOLDERS.nomeUsuario}
    tooltipMessage={TOOLTIP_MESSAGES.usuarioRequisitos}
    helperText={TOOLTIP_HELPER_TEXTS.identificadorUnico}
  />
  <Input
    label={TOOLTIP_LABELS.email}
    name="email"
    type="email"
    placeholder={TOOLTIP_PLACEHOLDERS.seuEmail}
    tooltipMessage={TOOLTIP_MESSAGES.emailPrivacidade}
    helperText={TOOLTIP_HELPER_TEXTS.emailValido}
  />
</div>

// Diretrizes de formatação
<div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
  <Input
    label={TOOLTIP_LABELS.telefone}
    name="phone"
    type="tel"
    placeholder={TOOLTIP_PLACEHOLDERS.telefoneExemplo}
    tooltipMessage={TOOLTIP_MESSAGES.telefoneFormato}
    helperText={TOOLTIP_HELPER_TEXTS.incluaDDD}
  />
  <Input
    label={TOOLTIP_LABELS.cpfCnpj}
    name="taxId"
    type="text"
    placeholder={TOOLTIP_PLACEHOLDERS.cpfExemplo}
    tooltipMessage={TOOLTIP_MESSAGES.cpfCnpjFormato}
    helperText={TOOLTIP_HELPER_TEXTS.identificacaoFiscal}
  />
</div>
```

## Referência da API

O componente Input com Tooltip suporta todas as props do Input padrão, além de props específicas para tooltip.

<table>
  <thead>
    <tr>
      <th>Prop</th>
      <th>Tipo</th>
      <th>Padrão</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>tooltipMessage</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Mensagem exibida no tooltip ao passar o mouse sobre o rótulo. Use para
        informações adicionais ou regras de validação.
      </td>
    </tr>
  </tbody>
</table>

## Exemplos

### Tipos de Conteúdo em Tooltip

Diferentes tipos de informação que funcionam bem em tooltips:

<Canvas withSource="open" withToolbar>
  <Story name="content-types">
    <div
      style={{
        display: 'flex',
        flexDirection: 'column',
        gap: '16px',
        maxWidth: '400px',
      }}
    >
      <Input
        label={TOOLTIP_LABELS.senha}
        name="strongPassword"
        type="password"
        placeholder={TOOLTIP_PLACEHOLDERS.digiteSenha}
        tooltipMessage={TOOLTIP_MESSAGES.senhaRequisitos}
        helperText={TOOLTIP_HELPER_TEXTS.escolhaSenhaForte}
      />
      <Input
        label={TOOLTIP_LABELS.valorMoeda}
        name="creditCard"
        type="text"
        placeholder={TOOLTIP_PLACEHOLDERS.valorExemplo}
        tooltipMessage={TOOLTIP_MESSAGES.valorExemplo}
        helperText={TOOLTIP_HELPER_TEXTS.valorMonetario}
      />
      <Input
        label={TOOLTIP_LABELS.observacoes}
        name="projectName"
        type="text"
        placeholder={TOOLTIP_PLACEHOLDERS.observacoesExemplo}
        tooltipMessage={TOOLTIP_MESSAGES.observacoesLimite}
        helperText={TOOLTIP_HELPER_TEXTS.informacoesAdicionais}
      />
    </div>
  </Story>
</Canvas>

### Exemplo de Formulário Completo

Exemplo real com múltiplos inputs com tooltip:

<Canvas withSource="open" withToolbar>
  <Story name="form-example">
    <form
      style={{
        display: 'flex',
        flexDirection: 'column',
        gap: '16px',
        maxWidth: '400px',
        padding: '16px',
        border: '1px solid #e0e0e0',
        borderRadius: '8px',
      }}
    >
      <Input
        label={TOOLTIP_LABELS.nomeUsuario}
        name="companyName"
        type="text"
        placeholder={TOOLTIP_PLACEHOLDERS.nomeUsuario}
        tooltipMessage={TOOLTIP_MESSAGES.usuarioRequisitos}
        helperText={TOOLTIP_HELPER_TEXTS.identificadorUnico}
        required
      />
      <Input
        label={TOOLTIP_LABELS.valorMoeda}
        name="revenue"
        type="text"
        placeholder={TOOLTIP_PLACEHOLDERS.valorExemplo}
        tooltipMessage={TOOLTIP_MESSAGES.valorExemplo}
        helperText={TOOLTIP_HELPER_TEXTS.valorMonetario}
      />
      <Input
        label={TOOLTIP_LABELS.cpfCnpj}
        name="businessId"
        type="text"
        placeholder={TOOLTIP_PLACEHOLDERS.cpfExemplo}
        tooltipMessage={TOOLTIP_MESSAGES.cpfCnpjFormato}
        helperText={TOOLTIP_HELPER_TEXTS.identificacaoFiscal}
        required
      />
      <Input
        label={TOOLTIP_LABELS.email}
        name="contactEmail"
        type="email"
        placeholder={TOOLTIP_PLACEHOLDERS.seuEmail}
        tooltipMessage={TOOLTIP_MESSAGES.emailPrivacidade}
        helperText={TOOLTIP_HELPER_TEXTS.emailValido}
        required
      />
    </form>
  </Story>
</Canvas>

## Integração com Formulários

### Uso em Formulários

```jsx
<form onSubmit={handleSubmit}>
  <Input
    label={TOOLTIP_LABELS.nomeUsuario}
    name="fullName"
    type="text"
    placeholder={TOOLTIP_PLACEHOLDERS.nomeUsuario}
    tooltipMessage={TOOLTIP_MESSAGES.usuarioRequisitos}
    required
  />
  <Button type="submit">Enviar</Button>
</form>
```

### Validação

```jsx
<form onSubmit={handleSubmit}>
  <Input
    label={TOOLTIP_LABELS.email}
    name="email"
    type="email"
    placeholder={TOOLTIP_PLACEHOLDERS.seuEmail}
    tooltipMessage={TOOLTIP_MESSAGES.emailPrivacidade}
    error={errors.email}
    helperText={errors.email || TOOLTIP_HELPER_TEXTS.emailValido}
    required
  />
  <Button type="submit" disabled={!isFormValid}>
    {isSubmitting ? 'Enviando...' : 'Enviar'}
  </Button>
</form>
```

## Melhores Práticas

### 1. Uso de Tooltips

- Use tooltips para informações complementares, não essenciais
- Mantenha as mensagens concisas e diretas
- Evite duplicar informações já presentes no helperText
- Use para explicar regras de validação complexas

### 2. Conteúdo

- Foque em informações práticas e acionáveis
- Use linguagem clara e direta
- Evite jargões técnicos desnecessários
- Mantenha consistência no tom e estilo

### 3. Acessibilidade

- Garanta que informações críticas não dependam apenas do tooltip
- Mantenha contraste adequado no texto do tooltip
- Considere usuários que não podem usar mouse
- Forneça alternativas para informações importantes

### 4. Design e UX

- Posicione tooltips de forma consistente
- Use animações suaves para aparecer/desaparecer
- Evite tooltips muito longos
- Considere o contexto mobile

## Classes CSS

<table>
  <thead>
    <tr>
      <th>Classe Global</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>.ods-input</code>
      </td>
      <td>Estilos aplicados ao elemento raiz.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input__label</code>
      </td>
      <td>Container do rótulo com ícone de tooltip.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-input__tooltip</code>
      </td>
      <td>Estilos do tooltip.</td>
    </tr>
  </tbody>
</table>

## Props

<ArgsTable of={Input} />

A ref é encaminhada para o elemento input. Qualquer outra prop fornecida será passada para o elemento input.

## Playground

<Canvas>
  <Story
    name="playground"
    args={{
      label: TOOLTIP_LABELS.senha,
      placeholder: TOOLTIP_PLACEHOLDERS.digiteSenha,
      helperText: TOOLTIP_HELPER_TEXTS.escolhaSenhaForte,
      tooltipMessage: TOOLTIP_MESSAGES.senhaRequisitos,
      type: 'password',
    }}
  >
    {(args) => <Input {...args} />}
  </Story>
</Canvas>
