import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import DateRange from '../DateRange';
import { useState } from 'react';
import { ptBR, enUS, ja, ar } from 'date-fns/locale';

<Meta
  title="Components/Date/DateRange"
  component={DateRange}
  decorators={[(storyFn) => <div>{storyFn()}</div>]}
  parameters={{
    layout: 'centered',
  }}
/>

# Date Range APIs

The API documentation of the DatePicker React component. Learn more about the props and the CSS customization points.

## Import

```javascript
import { DateRange } from '@useblu/ocean-react';
```

## Usage

```jsx
import { useState } from 'react';
import { DateRange } from '@useblu/ocean-react';
import { enUS } from 'date-fns/locale'; // Any locate object (default pt-BR)

const [dates, setDates] = useState({ from: '', to: '' });

const handleSelectDates = (dates) =>
  setDate({ from: dates.from, to: dates.to });

const labels = {
  from: 'Start date',
  to: 'End date',
};

<DateRange
  labels={labels}
  values={dates}
  onSelect={handleSelectDates}
  locale={enUS}
/>;
```

## Props

<ArgsTable story="Playground" of="." />

## CSS

| Global class                | Description                                          |
| --------------------------- | ---------------------------------------------------- |
| .ods-date                   | Styles applied to the root element.                  |
| .ods-date\_\_calendar       | Styles applied to the date modal.                    |
| .ods-date\_\_caption        | Styles applied to the date modal month title.        |
| .ods-date\_\_navButtons     | Styles applied to the date modal arrows buttons.     |
| .ods-date\_\_navButtonPrev  | Styles applied to the date modal left arrow button.  |
| .ods-date\_\_navButtonNext  | Styles applied to the date modal right arrow button. |
| .ods-date\_\_navIcon        | Styles applied to the date modal buttons icon.       |
| .ods-date\_\_table          | Styles applied to the date modal general table.      |
| .ods-date\_\_head           | Styles applied to the date modal table head.         |
| .ods-date\_\_headRow        | Styles applied to the date modal table head row.     |
| .ods-date\_\_body           | Styles applied to the date modal table modal.        |
| .ods-date\_\_row            | Styles applied to the date modal all table rows.     |
| .ods-date\_\_cell           | Styles applied to the date modal table cell.         |
| .ods-date\_\_day            | Styles applied to the date modal number day.         |
| .ods-date\_\_today          | Styles applied to the date modal today number.       |
| .ods-date\_\_selected       | Styles applied to the date modal selected days.      |
| .ods-date\_\_disabled       | Styles applied to the date modal disabled days.      |
| .ods-date\_\_selectedStart  | Styles applied to the date modal range start day.    |
| .ods-date\_\_selectedEnd    | Styles applied to the date modal range end day.      |
| .ods-date\_\_selectedMiddle | Styles applied to the date modal range middle days.  |

If that's not sufficient, you can check the [implementation of the component](https://github.com/ocean-ds/ocean-web/blob/master/packages/ocean-react/src/Date/DateRange.tsx) for more detail. -->

export const DinamicDatePicker = (props) => {
  const labels = {
    from: 'Start date',
    to: 'End date',
  };
  const [dates, setDates] = useState({ from: '', to: '' });
  const handleSelectDates = (dates) =>
    setDates({ from: dates.from, to: dates.to });
  return (
    <div
      style={{
        width: '100%',
        height: '400px',
        display: 'flex',
        justifyContent: 'center',
      }}
    >
      <div style={{ width: '100%' }}>
        <DateRange
          labels={labels}
          values={dates}
          onSelect={handleSelectDates}
          {...props}
        />
      </div>
    </div>
  );
};

export const selectLocation = (locale) => {
  const locales = {
    portuguese: ptBR,
    english: enUS,
    japanese: ja,
    arabic: ar,
  };
  return locales[locale];
};

## Playground

<Canvas withSource="close" withToolbar>
  <Story
    name="Playground"
    args={{
      label1: 'Start date',
      label2: 'End date',
      value1: '14/10/2022',
      value2: '15/10/2022',
      onSelect: () => null,
      helperText: 'Some text error here!',
      startsToday: false,
      editable: false,
      error: false,
      disabled: false,
      locale: 'pt-BR',
    }}
    argTypes={{
      label1: {
        control: 'text',
        description: 'Determines name of input (from)',
        type: { name: 'string', required: false },
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: '' },
        },
      },
      label2: {
        control: 'text',
        description: 'Determines name of input (to)',
        type: { name: 'string', required: false },
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: '' },
        },
      },
      value1: {
        control: null,
        description: 'Determines value of input (from)',
        type: { name: 'string', required: true },
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: '' },
        },
      },
      value2: {
        control: null,
        description: 'Determines value of input (to)',
        type: { name: 'string', required: true },
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: '' },
        },
      },
      onSelect: {
        control: null,
        description: 'Determines the function to change fields (from/to)',
        type: { required: true },
        table: {
          type: { summary: 'function' },
          defaultValue: { summary: null },
        },
      },
      startsToday: {
        control: 'boolean',
        description: 'Determines if date seleting starts today',
        default: false,
        table: {
          type: { summary: 'boolean' },
          defaultValue: { summary: false },
        },
      },
      helperText: {
        control: 'text',
        description: 'Determines error message',
        default: '',
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: '' },
        },
      },
      editable: {
        control: 'boolean',
        description: 'Determines if date inputs are editable',
        default: false,
        table: {
          type: { summary: 'boolean' },
          defaultValue: { summary: false },
        },
      },
      error: {
        control: 'boolean',
        description: 'Determines error of input',
        default: false,
        table: {
          type: { summary: 'boolean' },
          defaultValue: { summary: false },
        },
      },
      disabled: {
        control: 'boolean',
        description: 'Determines if date input are disabled',
        default: false,
        table: {
          type: { summary: 'boolean' },
          defaultValue: { summary: false },
        },
      },
      locale: {
        options: ['portuguese', 'english', 'japanese', 'arabic'],
        control: { type: 'select' },
        description:
          'Object locale of date-fns locale package (internationalize)',
        table: {
          type: { summary: 'object' },
          defaultValue: { summary: 'ptBR' },
        },
      },
    }}
  >
    {(props) => (
      <DinamicDatePicker
        labels={{ from: props.label1, to: props.label2 }}
        error={props.error}
        disabled={props.disabled}
        editable={props.editable}
        locale={selectLocation(props.locale)}
        startsToday={props.startsToday}
        helperText={props.helperText}
      />
    )}
  </Story>
</Canvas>
