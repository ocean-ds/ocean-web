import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import TextArea from '../TextArea';

export const TEXTAREA_LABELS = {
  basicLabel: 'Comentário',
  descriptionLabel: 'Descrição',
  messageLabel: 'Mensagem',
  feedbackLabel: 'Feedback',
  observationsLabel: 'Observações',
  notesLabel: 'Anotações',
  reviewLabel: 'Avaliação',
  requiredField: 'Campo Obrigatório',
};

export const TEXTAREA_HELPER_TEXTS = {
  basicHelp: 'Digite seu texto aqui',
  descriptionHelp: 'Descreva os detalhes importantes',
  messageHelp: 'Escreva sua mensagem completa',
  feedbackHelp: 'Compartilhe sua opinião ou sugestão',
  observationsHelp: 'Adicione observações relevantes',
  notesHelp: 'Faça suas anotações pessoais',
  reviewHelp: 'Escreva sua avaliação detalhada',
  validationError: 'Este campo é obrigatório',
  characterLimit: 'Máximo de 500 caracteres',
  minCharacters: 'Mínimo de 10 caracteres',
};

export const TEXTAREA_PLACEHOLDERS = {
  basicPlaceholder: 'Digite aqui...',
  descriptionPlaceholder: 'Descreva o produto, serviço ou situação',
  messagePlaceholder: 'Escreva sua mensagem',
  feedbackPlaceholder: 'Conte-nos sua experiência',
  observationsPlaceholder: 'Adicione suas observações',
  notesPlaceholder: 'Suas anotações',
  reviewPlaceholder: 'Como foi sua experiência?',
};

export const TEXTAREA_SCENARIOS = {
  basic: { rows: 3, maxLength: undefined },
  short: { rows: 2, maxLength: 100 },
  medium: { rows: 4, maxLength: 250 },
  long: { rows: 6, maxLength: 500 },
  extended: { rows: 8, maxLength: 1000 },
  unlimited: { rows: 5, maxLength: undefined },
};

export const TEXTAREA_EXAMPLES = {
  shortCommentLabel: 'Comentario Breve (2 linhas)',
  shortCommentHelp: 'Para comentarios curtos',
  shortLimitLabel: 'Comentario Curto (100 chars)',
  shortLimitPlaceholder: 'Maximo 100 caracteres',
  shortLimitHelp: 'Limite: 100 caracteres',
  mediumLimitLabel: 'Descricao Media (250 chars)',
  mediumLimitPlaceholder: 'Maximo 250 caracteres',
  mediumLimitHelp: 'Limite: 250 caracteres',
  longLimitLabel: 'Texto Longo (500 chars)',
  longLimitPlaceholder: 'Maximo 500 caracteres',
  longLimitHelp: 'Limite: 500 caracteres',
  noLimitLabel: 'Sem Limite',
  noLimitPlaceholder: 'Sem limite de caracteres',
  noLimitHelp: 'Digite livremente',
  disabledHelp: 'Campo desabilitado',
  prefilledContent: 'Conteudo pre-preenchido que nao pode ser editado',
  publishButton: 'Publicar Comentario',
};

<Meta
  title="Components/Inputs/TextArea"
  component={TextArea}
  decorators={[(storyFn) => <div className="input-story">{storyFn()}</div>]}
  argTypes={{
    label: {
      name: 'label',
      description: 'O rótulo do campo textarea.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    placeholder: {
      name: 'placeholder',
      description: 'Texto exibido quando o campo está vazio.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    helperText: {
      name: 'helperText',
      description: 'Texto de ajuda exibido abaixo do campo.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
    error: {
      name: 'error',
      description: 'Quando true, aplica o estilo de erro ao campo.',
      table: {
        type: { summary: 'boolean' },
        defaultValue: { summary: false },
      },
      control: { type: 'boolean' },
    },
    disabled: {
      name: 'disabled',
      description: 'Quando true, desabilita o campo textarea.',
      table: {
        type: { summary: 'boolean' },
        defaultValue: { summary: false },
      },
      control: { type: 'boolean' },
    },
    rows: {
      name: 'rows',
      description: 'Número de linhas visíveis do textarea.',
      table: {
        type: { summary: 'number' },
        defaultValue: { summary: '3' },
      },
      control: { type: 'number' },
    },
    maxLength: {
      name: 'maxLength',
      description: 'Número máximo de caracteres permitidos.',
      table: {
        type: { summary: 'number' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'number' },
    },
    value: {
      name: 'value',
      description: 'O valor atual do textarea.',
      table: {
        type: { summary: 'string' },
        defaultValue: { summary: 'undefined' },
      },
      control: { type: 'text' },
    },
  }}
/>

# TextArea

Componente de entrada de texto multilinha para captura de conteúdo extenso como comentários, descrições e mensagens.

## Visão Geral

O componente TextArea oferece uma área de texto expansível para entrada de conteúdo longo. É ideal para formulários que requerem descrições detalhadas, comentários, feedback ou qualquer texto que ultrapasse uma linha simples. Suporta validação, limites de caracteres e redimensionamento automático.

## Importação

```javascript
import { TextArea } from '@useblu/ocean-react';
```

## Uso

O componente TextArea pode ser usado em vários contextos. Aqui estão alguns padrões comuns:

### Uso Básico

<Canvas withSource="open" withToolbar>
  <Story name="usage">
    <TextArea
      label={TEXTAREA_LABELS.basicLabel}
      placeholder={TEXTAREA_PLACEHOLDERS.basicPlaceholder}
      helperText={TEXTAREA_HELPER_TEXTS.basicHelp}
      rows={TEXTAREA_SCENARIOS.basic.rows}
    />
  </Story>
</Canvas>

### Padrões Comuns

```jsx
// Exemplo básico usando variáveis
<TextArea
  label={TEXTAREA_LABELS.descriptionLabel}
  placeholder={TEXTAREA_PLACEHOLDERS.descriptionPlaceholder}
  helperText={TEXTAREA_HELPER_TEXTS.descriptionHelp}
  rows={TEXTAREA_SCENARIOS.medium.rows}
  maxLength={TEXTAREA_SCENARIOS.medium.maxLength}
/>

// Em formulários com validação
<form onSubmit={handleSubmit}>
  <TextArea
    label={TEXTAREA_LABELS.requiredField}
    placeholder={TEXTAREA_PLACEHOLDERS.feedbackPlaceholder}
    helperText={TEXTAREA_HELPER_TEXTS.feedbackHelp}
    error={false}
    rows={TEXTAREA_SCENARIOS.long.rows}
    maxLength={TEXTAREA_SCENARIOS.long.maxLength}
    required
  />
</form>
```

## Referência da API

O componente TextArea é baseado no elemento `textarea` e suporta todos os atributos padrão.

<table>
  <thead>
    <tr>
      <th>Prop</th>
      <th>Tipo</th>
      <th>Padrão</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>label</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        O rótulo do campo textarea. Exibido acima do campo para identificação.
      </td>
    </tr>
    <tr>
      <td>placeholder</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Texto exibido quando o campo está vazio. Fornece orientação sobre o
        conteúdo esperado.
      </td>
    </tr>
    <tr>
      <td>helperText</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Texto de ajuda exibido abaixo do campo. Use para instruções ou
        validação.
      </td>
    </tr>
    <tr>
      <td>error</td>
      <td>
        <code>boolean</code>
      </td>
      <td>
        <code>false</code>
      </td>
      <td>
        Quando true, aplica o estilo de erro ao campo. Use para indicar
        problemas de validação.
      </td>
    </tr>
    <tr>
      <td>disabled</td>
      <td>
        <code>boolean</code>
      </td>
      <td>
        <code>false</code>
      </td>
      <td>
        Quando true, desabilita o campo textarea. Use quando a entrada não é
        permitida.
      </td>
    </tr>
    <tr>
      <td>rows</td>
      <td>
        <code>number</code>
      </td>
      <td>
        <code>3</code>
      </td>
      <td>
        Número de linhas visíveis do textarea. Define a altura inicial do campo.
      </td>
    </tr>
    <tr>
      <td>maxLength</td>
      <td>
        <code>number</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        Número máximo de caracteres permitidos. Previne entrada excessiva.
      </td>
    </tr>
    <tr>
      <td>value</td>
      <td>
        <code>string</code>
      </td>
      <td>
        <code>undefined</code>
      </td>
      <td>
        O valor atual do textarea. Use para controlar o estado do componente.
      </td>
    </tr>
  </tbody>
</table>

## Exemplos

### Diferentes Tamanhos

Demonstração com diferentes números de linhas para diversos tipos de conteúdo:

<Canvas withSource="open" withToolbar>
  <Story name="different-sizes">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <TextArea
        label={TEXTAREA_EXAMPLES.shortCommentLabel}
        placeholder={TEXTAREA_PLACEHOLDERS.basicPlaceholder}
        helperText={TEXTAREA_EXAMPLES.shortCommentHelp}
        rows={TEXTAREA_SCENARIOS.short.rows}
        maxLength={TEXTAREA_SCENARIOS.short.maxLength}
      />
      <TextArea
        label={TEXTAREA_LABELS.descriptionLabel}
        placeholder={TEXTAREA_PLACEHOLDERS.descriptionPlaceholder}
        helperText={TEXTAREA_HELPER_TEXTS.descriptionHelp}
        rows={TEXTAREA_SCENARIOS.medium.rows}
        maxLength={TEXTAREA_SCENARIOS.medium.maxLength}
      />
      <TextArea
        label={TEXTAREA_LABELS.reviewLabel}
        placeholder={TEXTAREA_PLACEHOLDERS.reviewPlaceholder}
        helperText={TEXTAREA_HELPER_TEXTS.reviewHelp}
        rows={TEXTAREA_SCENARIOS.long.rows}
        maxLength={TEXTAREA_SCENARIOS.long.maxLength}
      />
    </div>
  </Story>
</Canvas>

### Estados de Erro

Use a prop `error` para indicar problemas de validação:

<Canvas withSource="open" withToolbar>
  <Story name="error-states">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <TextArea
        label={TEXTAREA_LABELS.requiredField}
        placeholder={TEXTAREA_PLACEHOLDERS.messagePlaceholder}
        helperText={TEXTAREA_HELPER_TEXTS.validationError}
        error={true}
        rows={TEXTAREA_SCENARIOS.medium.rows}
      />
      <TextArea
        label={TEXTAREA_LABELS.messageLabel}
        placeholder={TEXTAREA_PLACEHOLDERS.messagePlaceholder}
        helperText={TEXTAREA_HELPER_TEXTS.messageHelp}
        error={false}
        rows={TEXTAREA_SCENARIOS.medium.rows}
      />
    </div>
  </Story>
</Canvas>

### Estados Desabilitados

Use a prop `disabled` quando a entrada não é permitida:

<Canvas withSource="open" withToolbar>
  <Story name="disabled-states">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <TextArea
        label={TEXTAREA_LABELS.observationsLabel}
        placeholder={TEXTAREA_PLACEHOLDERS.observationsPlaceholder}
        helperText={TEXTAREA_EXAMPLES.disabledHelp}
        disabled={true}
        rows={TEXTAREA_SCENARIOS.medium.rows}
        defaultValue={TEXTAREA_EXAMPLES.prefilledContent}
      />
      <TextArea
        label={TEXTAREA_LABELS.notesLabel}
        placeholder={TEXTAREA_PLACEHOLDERS.notesPlaceholder}
        helperText={TEXTAREA_HELPER_TEXTS.notesHelp}
        disabled={false}
        rows={TEXTAREA_SCENARIOS.medium.rows}
      />
    </div>
  </Story>
</Canvas>

### Limites de Caracteres

Demonstração de diferentes configurações de limite de caracteres:

<Canvas withSource="open" withToolbar>
  <Story name="character-limits">
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <TextArea
        label={TEXTAREA_EXAMPLES.shortLimitLabel}
        placeholder={TEXTAREA_EXAMPLES.shortLimitPlaceholder}
        helperText={TEXTAREA_EXAMPLES.shortLimitHelp}
        rows={2}
        maxLength={100}
      />
      <TextArea
        label={TEXTAREA_EXAMPLES.mediumLimitLabel}
        placeholder={TEXTAREA_EXAMPLES.mediumLimitPlaceholder}
        helperText={TEXTAREA_EXAMPLES.mediumLimitHelp}
        rows={4}
        maxLength={250}
      />
      <TextArea
        label={TEXTAREA_EXAMPLES.longLimitLabel}
        placeholder={TEXTAREA_EXAMPLES.longLimitPlaceholder}
        helperText={TEXTAREA_EXAMPLES.longLimitHelp}
        rows={6}
        maxLength={500}
      />
      <TextArea
        label={TEXTAREA_EXAMPLES.noLimitLabel}
        placeholder={TEXTAREA_EXAMPLES.noLimitPlaceholder}
        helperText={TEXTAREA_EXAMPLES.noLimitHelp}
        rows={4}
      />
    </div>
  </Story>
</Canvas>

## Integração com Formulários

### Uso em Formulários

```jsx
<form onSubmit={handleSubmit}>
  <TextArea
    label={TEXTAREA_LABELS.descriptionLabel}
    placeholder={TEXTAREA_PLACEHOLDERS.descriptionPlaceholder}
    name="description"
    rows={TEXTAREA_SCENARIOS.medium.rows}
    maxLength={TEXTAREA_SCENARIOS.medium.maxLength}
  />
  <Button type="submit">Enviar</Button>
</form>
```

### Validação

```jsx
<form onSubmit={handleSubmit}>
  <TextArea
    label={TEXTAREA_LABELS.requiredField}
    placeholder={TEXTAREA_PLACEHOLDERS.feedbackPlaceholder}
    helperText={TEXTAREA_HELPER_TEXTS.feedbackHelp}
    error={false}
    rows={TEXTAREA_SCENARIOS.long.rows}
    maxLength={TEXTAREA_SCENARIOS.long.maxLength}
    required
  />
  <Button type="submit" disabled={false}>
    Enviar Feedback
  </Button>
</form>
```

### Controle de Estado

```jsx
function CommentForm() {
  const [comment, setComment] = useState('');
  const [charCount, setCharCount] = useState(0);
  const maxLength = 500;

  const handleChange = (e) => {
    setComment(e.target.value);
    setCharCount(e.target.value.length);
  };

  return (
    <div>
      <TextArea
        label={TEXTAREA_LABELS.basicLabel}
        value={comment}
        onChange={handleChange}
        maxLength={maxLength}
        rows={5}
        helperText={`${charCount}/${maxLength} caracteres`}
      />
      <Button disabled={comment.length < 10}>
        {TEXTAREA_EXAMPLES.publishButton}
      </Button>
    </div>
  );
}
```

## Classes CSS

<table>
  <thead>
    <tr>
      <th>Classe Global</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>.ods-textarea</code>
      </td>
      <td>Estilos aplicados ao elemento textarea.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-textarea--filled</code>
      </td>
      <td>Estilos aplicados ao textarea quando está preenchido.</td>
    </tr>
    <tr>
      <td>
        <code>.ods-textarea--error</code>
      </td>
      <td>Estilos aplicados ao textarea quando error={true}.</td>
    </tr>
  </tbody>
</table>

## Melhores Práticas

### 1. Uso Geral

- Use para conteúdo que requer múltiplas linhas
- Defina um número apropriado de linhas iniciais (rows)
- Forneça placeholders descritivos sobre o conteúdo esperado
- Use labels claros que indiquem o propósito do campo

### 2. Limites e Validação

- Defina `maxLength` para prevenir conteúdo excessivo
- Use validação para campos obrigatórios
- Forneça feedback sobre limites de caracteres
- Considere validação de conteúdo mínimo quando necessário

### 3. Acessibilidade

- Sempre use labels apropriados
- Forneça helperText descritivo sobre requisitos
- Mantenha navegação por teclado funcional
- Use aria-describedby para textos de ajuda

### 4. Design e UX

- Ajuste o número de linhas ao tipo de conteúdo esperado
- Para comentários breves: 2-3 linhas
- Para descrições: 4-5 linhas
- Para conteúdo extenso: 6+ linhas
- Considere redimensionamento automático para melhor UX

### 5. Performance

- Use debounce para validação em tempo real
- Evite re-renderizações desnecessárias
- Considere lazy loading para listas com muitos textareas
- Use defaultValue quando o controle total não é necessário

## Props

<ArgsTable of={TextArea} />

A ref é encaminhada para o elemento raiz. Qualquer outra prop fornecida será passada para o elemento raiz.

## Playground

<Canvas>
  <Story
    name="playground"
    args={{
      label: TEXTAREA_LABELS.basicLabel,
      placeholder: TEXTAREA_PLACEHOLDERS.basicPlaceholder,
      helperText: TEXTAREA_HELPER_TEXTS.basicHelp,
      error: false,
      disabled: false,
      rows: TEXTAREA_SCENARIOS.basic.rows,
    }}
    argTypes={{
      label: {
        control: { type: 'text' },
      },
      placeholder: {
        control: { type: 'text' },
      },
      defaultValue: {
        control: { type: 'text' },
      },
      disabled: {
        control: { type: 'boolean' },
      },
      helperText: {
        control: { type: 'text' },
      },
      rows: {
        control: { type: 'number' },
      },
      maxLength: {
        control: { type: 'number' },
      },
    }}
  >
    {(props) => <TextArea {...props} />}
  </Story>
</Canvas>

## Herança

As props do componente [FormControl](?path=/docs/components-formcontrol--page) também estão disponíveis.

Se isso não for suficiente, você pode verificar a [implementação do componente](https://github.com/ocean-ds/ocean-web/blob/master/packages/ocean-react/src/TextArea/TextArea.tsx) para mais detalhes.
